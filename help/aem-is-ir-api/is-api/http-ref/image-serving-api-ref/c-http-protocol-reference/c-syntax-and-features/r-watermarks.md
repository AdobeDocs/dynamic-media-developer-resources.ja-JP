---
description: 画像サービングは、シンプルな視覚的な透かし機能を実装します。
solution: Experience Manager
title: 透かし
feature: Dynamic Media Classic,SDK/API
role: Developer,User
exl-id: e744be3f-9753-4513-8f37-055fa03077cc
source-git-commit: 4f81f755789613222a66bed2961117604ae19e62
workflow-type: tm+mt
source-wordcount: '457'
ht-degree: 0%

---

# 透かし{#watermarks}

画像サービングは、シンプルな視覚的な透かし機能を実装します。

透かしは通常、半透明の画像ですが、テキストや、より複雑なレイヤー化された合成画像の場合もあります。 サーバーは、すべてのビュー属性（`wid=`、`hei=`、`align=`、`scl=`、`bgc=`）が適用された後で、返信画像に透かしをレイヤー化します。

透かしを有効にするには、透かし画像またはテンプレートを含む有効なカタログエントリに `attribute::Watermark` を設定します。 `attribute::Watermark` が名前付きカタログに設定されている場合、サーバーは、リクエスト URL 内のカタログ ID を参照するすべての画像リクエストに透かしを追加します。 `default::Watermark` が設定されている場合（デフォルトのカタログでは [!DNL default.ini]）、カタログを参照しているかどうかに関係なく、すべての画像リクエストに透かしが適用されます。

透かしは、サムネールリクエスト（`req=tmb`）および Dynamic Media ビューアからの特定のリクエストに応答して返される画像には適用されません。

## スケーリングと整列 {#section-89ef9e5926ae438abbd8e70332749b76}

透かしが指定されると、サーバは最初に、透かしを適用する必要がある合成画像（*ターゲット画像*）を生成します（ビュー変換を適用する前に）。 次に、サーバーは、他の画像（*透かし画像*）と同様に、透かしの合成画像を生成します。

標準画像とは異なり、透かし画像の layer=0 または layer=comp に `sizeN=` を指定できます。 これにより、ターゲット画像に対する透かし画像の拡大縮小が可能になります。 `sizeN=` が指定されていない場合、透かし画像は、ターゲット画像と結合されても、ピクセルサイズを保持します。

リクエストコマンド（`fmt=` など）およびビューコマンド（`wid=` など）は、透かしレコードでは無視されます（`align=` を除く）。 `align=` れを使用して、ターゲット画像に対する透かし画像の相対的な位置を透かし画像に設定することができる。 これにより、ターゲット画像の角または端を基準に透かしを配置できます。

スケーリングおよび位置合わせの後、サーバは、透かし画像の `blendMode=` または `opac=` に指定された `layer=0` および `layer=comp` の値を使用して、ターゲット画像に透かし画像をレイヤする。 最後に、ターゲット画像に対して指定された要求コマンドおよび表示コマンドを適用して、返信画像を構築する。

透かし画像は、`wid=` および `hei=` コマンドによって返信画像に追加された空白スペースを超えて拡張されることはありません。

## 例 {#section-0408c977d7324d4cb0e76a91cdfa2acd}

典型的な透かしは、ロゴまたは著作権表示を含む単純な RGBA 画像で構成される場合があります。 `catalog::Id` に設定した画像カタログ（またはデフォルトのカタログ）にレコード `watermark` 作成し、`catalog::Path` で透かし画像ファイルを指定します。 少し余白を残しながら、表示画像に合わせて（透かしを変形させずに）透かしを拡大し、不透明度を元の透かしの 20% に減らしたいので、`catalog::Modifier` を `sizeN=0.9,0.9&opac=20` に設定します。 透かしを有効にするには、`attribute::Watermark` を透かしカタログエントリの ID に設定します。この例では「透かし」を使用します。 さまざまな透かし効果を得るために、さまざまな `blendMode=` の選択肢を試してみることをお勧めします。

## 関連項目 {#section-4d66713abacb42c7b6a0c93cbf966a97}

[属性：：透かし](../../../../../is-api/image-catalog/image-serving-api-ref/c-image-catalog-reference/c-attributes-reference/r-watermark.md#reference-942b50acb2dd43a5ae498dc41ea9ac9b)
